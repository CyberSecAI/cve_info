{
    "cveId": "CVE-2025-21684",
    "version": "1.0.0",
    "timestamp": "2025-07-04T16:12:41.853043+00:00",
    "description": "In the Linux kernel, the following vulnerability has been resolved gpio xilinx Convert gpio_lock to raw spinlock irq_chip functions may be called in raw spinlock context. Therefore, we must also use a raw spinlock for our own internal locking. This fixes the following lockdep splat [ 5.349336] ============================= [ 5.353349] [ BUG Invalid wait context ] [ 5.357361] 6.13.0-rc5+ #69 Tainted G W [ 5.363031] ----------------------------- [ 5.367045] kworker/u171/44 is trying to lock [ 5.371587] ffffff88018b02c0 (&chip->gpio_lock){....}-{33}, at xgpio_irq_unmask (drivers/gpio/gpio-xilinx.c433 (discriminator 8)) [ 5.380079] other info that might help us debug this [ 5.385138] context-{55} [ 5.387762] 5 locks held by kworker/u171/44 [ 5.392123] #0 ffffff8800014958 ((wq_completion)events_unbound){+.+.}-{00}, at process_one_work (kernel/workqueue.c3204) [ 5.402260] #1 ffffffc082fcbdd8 (deferred_probe_work){+.+.}-{00}, at process_one_work (kernel/workqueue.c3205) [ 5.411528] #2 ffffff880172c900 (&dev->mutex){....}-{44}, at __device_attach (drivers/base/dd.c1006) [ 5.419929] #3 ffffff88039c8268 (request_class#2){+.+.}-{44}, at __setup_irq (kernel/irq/internals.h156 kernel/irq/manage.c1596) [ 5.428331] #4 ffffff88039c80c8 (lock_class#2){....}-{22}, at __setup_irq (kernel/irq/manage.c1614) [ 5.436472] stack backtrace [ 5.439359] CPU 2 UID 0 PID 44 Comm kworker/u171 Tainted G W 6.13.0-rc5+ #69 [ 5.448690] Tainted [W]=WARN [ 5.451656] Hardware name xlnx,zynqmp (DT) [ 5.455845] Workqueue events_unbound deferred_probe_work_func [ 5.461699] Call trace [ 5.464147] show_stack+0x18/0x24 C [ 5.467821] dump_stack_lvl (lib/dump_stack.c123) [ 5.471501] dump_stack (lib/dump_stack.c130) [ 5.474824] __lock_acquire (kernel/locking/lockdep.c4828 kernel/locking/lockdep.c4898 kernel/locking/lockdep.c5176) [ 5.478758] lock_acquire (arch/arm64/include/asm/percpu.h40 kernel/locking/lockdep.c467 kernel/locking/lockdep.c5851 kernel/locking/lockdep.c5814) [ 5.482429] _raw_spin_lock_irqsave (include/linux/spinlock_api_smp.h111 kernel/locking/spinlock.c162) [ 5.486797] xgpio_irq_unmask (drivers/gpio/gpio-xilinx.c433 (discriminator 8)) [ 5.490737] irq_enable (kernel/irq/internals.h236 kernel/irq/chip.c170 kernel/irq/chip.c439 kernel/irq/chip.c432 kernel/irq/chip.c345) [ 5.494060] __irq_startup (kernel/irq/internals.h241 kernel/irq/chip.c180 kernel/irq/chip.c250) [ 5.497645] irq_startup (kernel/irq/chip.c270) [ 5.501143] __setup_irq (kernel/irq/manage.c1807) [ 5.504728] request_threaded_irq (kernel/irq/manage.c2208)",
    "keyphrases": {
        "rootcause": "improper locking",
        "weakness": "",
        "impact": "Invalid wait context",
        "vector": "",
        "attacker": "",
        "product": "Linux kernel",
        "version": "6.13.0-rc5+",
        "component": "gpio xilinx"
    }
}
