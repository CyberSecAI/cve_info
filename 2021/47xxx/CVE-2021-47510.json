{
    "cveId": "CVE-2021-47510",
    "version": "1.0.0",
    "timestamp": "2024-12-06T11:32:07.789868+00:00",
    "description": "In the Linux kernel, the following vulnerability has been resolved btrfs fix re-dirty process of tree-log nodes There is a report of a transaction abort of -EAGAIN with the following script. #!/bin/sh for d in sda sdb do mkfs.btrfs -d single -m single -f /dev/\\${d} done mount /dev/sda /mnt/test mount /dev/sdb /mnt/scratch for dir in test scratch do echo 3 >/proc/sys/vm/drop_caches fio --directory=/mnt/\\${dir} --name=fio.\\${dir} --rw=read --size=50G --bs=64m \\ --numjobs=$(nproc) --time_based --ramp_time=5 --runtime=480 \\ --group_reporting |& tee /dev/shm/fio.\\${dir} echo 3 >/proc/sys/vm/drop_caches done for d in sda sdb do umount /dev/\\${d} done The stack trace is shown in below. [3310.967991] BTRFS error (device sda) in btrfs_commit_transaction2341 errno=-11 unknown (Error while writing out transaction) [3310.968060] BTRFS info (device sda) forced readonly [3310.968064] BTRFS warning (device sda) Skipping commit of aborted transaction. [3310.968065] ------------[ cut here ]------------ [3310.968066] BTRFS Transaction aborted (error -11) [3310.968074] WARNING CPU 14 PID 1684 at fs/btrfs/transaction.c1946 btrfs_commit_transaction.cold+0x209/0x2c8 [3310.968131] CPU 14 PID 1684 Comm fio Not tainted 5.14.10-300.fc35.x86_64 #1 [3310.968135] Hardware name DIAWAY Tartu/Tartu, BIOS V2.01.B10 04/08/2021 [3310.968137] RIP 0010btrfs_commi",
    "keyphrases": {
        "rootcause": "",
        "weakness": "",
        "impact": "transaction abort",
        "vector": "",
        "attacker": "",
        "product": "Linux kernel",
        "version": "",
        "component": "btrfs fix re-dirty process"
    }
}
