{
    "cveId": "CVE-2024-26891",
    "version": "1.0.0",
    "timestamp": "2024-12-06T11:32:07.789868+00:00",
    "description": "In the Linux kernel, the following vulnerability has been resolved iommu/vt-d Dont issue ATS Invalidation request when device is disconnected For those endpoint devices connect to system via hotplug capable ports, users could request a hot reset to the device by flapping devices link through setting the slots link control register, as pciehp_ist() DLLSC interrupt sequence response, pciehp will unload the device driver and then power it off. thus cause an IOMMU device-TLB invalidation (Intel VT-d spec, or ATS Invalidation in PCIe spec r6.1) request for non-existence target device to be sent and deadly loop to retry that request after ITE fault triggered in interrupt context. That would cause following continuous hard lockup warning and system hang [ 4211.433662] pcieport 00001701.0 pciehp Slot(108) Link Down [ 4211.433664] pcieport 00001701.0 pciehp Slot(108) Card not present [ 4223.822591] NMI watchdog Watchdog detected hard LOCKUP on cpu 144 [ 4223.822622] CPU 144 PID 1422 Comm irq/57-pciehp Kdump loaded Tainted G S OE kernel version xxxx [ 4223.822623] Hardware name vendorname xxxx 666-106, BIOS 01.01.02.03.01 05/15/2023 [ 4223.822623] RIP 0010qi_submit_sync+0x2c0/0x490 [ 4223.822624] Code 48 be 00 00 00 00 00 08 00 00 49 85 74 24 20 0f 95 c1 48 8b 57 10 83 c1 04 83 3c 1a 03 0f 84 a2 01 00 00 49 8b 04 24 8b 70 34 f6 c6 1 0 74 17 49 8b 04 24 8b 80 80 00 00 00 89 c2 d3 fa 41 39 [ 4223.822624] RSP 0018ffffc4f074f0bbb8 EFLAGS 00"
}
